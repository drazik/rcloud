{% extends 'RCloudRBundle::layout.html.twig' %}

{% block content %}
<div class="row row-padded">
    <div class="col">
        <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ path('folders_list') }}">Vos scripts</a></li>
            {% for item in breadcrumbItems %}
                <li class="breadcrumb-item">
                    {% if loop.last %}
                    {{ item.name }}
                    {% else %}
                    <a href="{{ path('folders_list', {'id': item.id}) }}">
                        {{ item.name }}
                    </a>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>

        <ul class="folders">
            {% for folder in folders %}
                <li class="folder">
                    <a href="{{path("folders_list",{"id" : folder.id})}}">
                        <ul class="folder-infos">
                            <li class="folder-name">{{ folder.name }}</li>
                            <li>0 dossier(s)</li>
                            <li>{{ folder.scripts|length }} script(s)</li>
                        </ul>
                    </a>
                </li>
            {% endfor %}
        </ul>

        {% if currentFolder is not null %}
        <div class="row row-padded">
            <div class="col-8">
                {% if currentFolder.scripts|length > 0 %}
                <table class="scripts-list">
                    <thead>
                        <tr>
                            <th class="scripts-list-header-title">Titre</th>
                            <th class="scripts-list-header-modification">Modification</th>
                            <th class="scripts-list-header-actions" colspan="2">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for script in currentFolder.scripts %}
                            <tr>
                                <td>
                                    <a href="{{ path('show_editor', {'scriptId': script.id}) }}" title="Editer {{ script.name }}">
                                        {{ script.name }}
                                    </a>
                                </td>
                                <td>
                                    {{ script.dateModification|localizeddate('medium', 'none') }}
                                </td>
                                <td class="scripts-list-action">
                                    <a href="{{ path('show_editor', {'scriptId': script.id}) }}" title="Editer {{ script.name }}">
                                        <i class="fa fa-edit"></i>
                                    </a>
                                </td>
                                <td class="scripts-list-action">
                                    <a href="{{ path('script_remove', {'scriptId': script.id}) }}" title="Supprimer {{ script.name }}">
                                        <i class="fa fa-trash-o"></i>
                                    </a>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% endif %}
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
